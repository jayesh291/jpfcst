rm(list = ls())
setwd("C:/jp/git/jpfcst/jpfcst")
library(reshape)
library(corrplot)
library(data.table)
library(psych)
library(plotrix)
source('C:/jp/git/jpfcst/jpfcst/timeseries.R', echo=TRUE)
source('C:/jp/git/jpfcst/jpfcst/matchpattern.R', echo=TRUE)
source('C:/jp/git/jpfcst/jpfcst/timeseries.R', echo=TRUE)
source('C:/jp/git/jpfcst/jpfcst/timeseries.R', echo=TRUE)
grp = 5
mmbr = 1
window = 7
step = 1
C5 = NULL
columnnames = NULL
repid = rep.ids[grp]
targetid = names(rhc[[grp]])[mmbr]
rep.id.data = mtr.f2[id == repid, ]
j <- getSlidingWindows(rep.id.data, window, step)
j[, 1] <- mtr.f3[id == targetid, val]
C4 <-
cor(j, use = "pairwise.complete.obs", method = "kendall")[, 1]
C4
C4[C4 > 0.99999999] <- 0
C4
C4
matcheddate <- names(C4[match(max(C4, na.rm = TRUE), C4)])
matcheddate
